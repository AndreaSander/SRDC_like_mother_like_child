"0","#### CONSTRUCTING AND DESCRIBING ALL RELEVANT DATA SETS ####"
"0",""
"0","#Trilingul exclusions count"
"0","total_excluded_triling<- final_data_no_exc %>%"
"0","    group_by(unique_id, exp_l1, exp_l2)%>%"
"0","   mutate(total_l1_l2_exp=(sum(exp_l1,exp_l2,na.rm = T))) %>%"
"0","  ungroup() %>%"
"0","  filter(total_l1_l2_exp<=90) %>%"
"0","  distinct(unique_id)%>%"
"0","  tally()"
"0",""
"0","#Monolingual exclusions"
"0","total_monoling_excluded<- final_data_no_exc %>%"
"0","  filter(exp_l1 >95) %>%"
"0","  filter(exp_l2 <5) %>%"
"0","  distinct(unique_id) %>%"
"0","  tally()"
"0",""
"0",""
"0","#after third language exclusions exclusions"
"0","n <- final_data_strat %>%"
"0","  distinct(unique_id) %>%"
"0","  tally()"
"0",""
"0","#subseting to get data only from each child's first visit to the lab. For main analyses"
"0","first_visit_only <- final_data_strat%>%"
"0","    arrange(anon_baby_id, age) %>%"
"0","  group_by(anon_baby_id) %>%"
"0","  mutate(visit = row_number()) %>%"
"0","  ungroup() %>%"
"0","  filter(visit==1) "
"0",""
"0","#n when only taking first visit"
"0","n_keep_first_visit<-first_visit_only %>%"
"0","  distinct(anon_baby_id)%>%"
"0","  tally()"
"0",""
"0","age_min <- round(min(first_visit_only$age, na.rm = T), 2)"
"0","age_max<- round(max(first_visit_only$age, na.rm = T), 2)"
"0","age_mean<- round(mean(first_visit_only$age, na.rm = T), 2)"
"0","age_sd<- round(sd(first_visit_only$age, na.rm = T), 2)"
"0",""
"0","female<- first_visit_only %>%"
"0","  filter(gender==""female"")%>%"
"0","  distinct(anon_baby_id)%>% #using anon_baby_id since it uniquely identifies individual babies, instead of identifying by study"
"0","  tally()"
"0",""
"0","num_visits <- final_data_strat %>% "
"0","  count(anon_baby_id, name = ""n_visits"") %>% "
"0","  count(n_visits, name = ""n_families"")  %>% "
"0","  mutate(n_data_points = n_families* n_visits)"
"0",""
"0",""
"0","#French-English-Heritage bilingual percentages"
"0",""
"0","FEH <- first_visit_only %>%"
"0","  mutate(l1 = case_when(l1==""French"" ~ ""French"","
"0","                        l1==""English"" ~ ""English"","
"0","                        TRUE ~ ""Heritage"")) %>%"
"0","    mutate(l2 = case_when(l2==""French"" ~ ""French"","
"0","                        l2==""English"" ~ ""English"","
"0","                        TRUE ~ ""Heritage"")) %>%"
"0","  mutate(bilingual_type = case_when(l1 %in% c(""French"", ""English"") & l2 %in% c(""French"", ""English"") ~ ""fre-eng"","
"0","                                    l1 %in% c(""French"", ""Heritage"") & l2 %in% c(""French"", ""Heritage"") ~ ""fre-her"","
"0","                                    l1 %in% c(""Heritage"", ""English"") & l2 %in% c(""Heritage"", ""English"") ~ ""eng-her"")) "
"0",""
"0","#Exporting the final data set that we used in all analyses and visualizations"
"0","#write_xlsx(FEH,""anonymized_data\\fam_Str_cross_sectional.xlsx"")"
"0","  "
"0","FEH_perc<- FEH %>%"
"0","  group_by(bilingual_type) %>%"
"0","  tally()%>%"
"0","    mutate(prop = n/sum(n)) %>%"
"0","  mutate(perc= prop*100)"
"0",""
"0",""
"0","#By bilingual type percentages"
"0",""
"0","fre_eng_perc <- FEH %>%"
"0","  filter(bilingual_type== ""fre-eng"")%>%"
"0"," group_by(l1) %>%"
"0","  tally()%>%"
"0","    mutate(prop = n/sum(n)) %>%"
"0","  mutate(perc= prop*100)"
"0","  "
"0","  "
"0","  fre_her_perc <- FEH %>%"
"0","  filter(bilingual_type==""fre-her"")%>%"
"0","  group_by(l1) %>%"
"0","  tally()%>%"
"0","    mutate(prop = n/sum(n)) %>%"
"0","  mutate(perc= prop*100)"
"0",""
"0","  "
"0","  her_eng_perc <- FEH %>%"
"0","  filter(bilingual_type==""eng-her"") %>%"
"0","  group_by(l1) %>%"
"0","  tally()%>%"
"0","    mutate(prop = n/sum(n)) %>%"
"0","  mutate(perc= prop*100)"
"0",""
"0","#l1 amount of exposure range"
"0","min_exp_range <- final_data_strat %>% "
"0","  select(exp_l1) %>%"
"0","  min()"
"0",""
"0","max_exp_range <-final_data_strat %>% "
"0","  select(exp_l1) %>%"
"0","  max()"
"0",""
"0","###JOINING SES INFO TO CLEAN DATA"
"0",""
"0","FEH <- FEH %>%"
"0","  right_join(SES_info, FEH, by=c(""unique_id"", ""study"", ""anon_baby_id""))"
"0",""
"0","##MATERNAL EDUCATION French-English sample"
"0"," FE_maternal_education <- FEH %>%"
"0","  filter(bilingual_type==""fre-eng"") %>%"
"0","  group_by(maternal_education) %>%"
"0","   drop_na(maternal_education) %>%"
"0","  tally()%>%"
"0","    mutate(prop = n/sum(n)) %>%"
"0","  mutate(perc= prop*100)"
"0"," "
"0"," ##Paternal EDUCATION French-English sample"
"0"," FE_paternal_education <- FEH %>%"
"0","  filter(bilingual_type==""fre-eng"") %>%"
"0","  group_by(paternal_education) %>%"
"0","   drop_na(paternal_education) %>%"
"0","  tally()%>%"
"0","    mutate(prop = n/sum(n)) %>%"
"0","  mutate(perc= prop*100)"
"0",""
"0"," ##Child ethnicity French-English sample"
"0","  FE_child_ethicity <- FEH %>%"
"0","  filter(bilingual_type==""fre-eng"") %>%"
"0","  group_by(child_ethnicity) %>%"
"0","    drop_na(child_ethnicity)%>%"
"0","  tally()%>%"
"0","    mutate(prop = n/sum(n)) %>%"
"0","  mutate(perc= prop*100)"
"0",""
"0","  "
"0","  ##MATERNAL EDUCATION heritage sample"
"0"," her_maternal_education <- FEH %>%"
"0","  filter(!bilingual_type==""fre-eng"") %>%"
"0","  group_by(maternal_education) %>%"
"0","   drop_na(maternal_education) %>%"
"0","  tally()%>%"
"0","    mutate(prop = n/sum(n)) %>%"
"0","  mutate(perc= prop*100)"
"0"," "
"0"," ##Paternal EDUCATION heritage sample"
"0"," her_paternal_education <- FEH %>%"
"0","  filter(!bilingual_type==""fre-eng"") %>%"
"0","  group_by(paternal_education) %>%"
"0","  drop_na(paternal_education) %>%"
"0","  tally()%>%"
"0","    mutate(prop = n/sum(n)) %>%"
"0","  mutate(perc= prop*100)"
"0",""
"0"," ##Child ethnicity her sample"
"0","  her_child_ethicity <- FEH %>%"
"0","  filter(!bilingual_type==""fre-eng"") %>%"
"0","  group_by(child_ethnicity) %>%"
"0","    drop_na(child_ethnicity) %>%"
"0","  tally()%>%"
"0","    mutate(prop = n/sum(n)) %>%"
"0","  mutate(perc= prop*100)"
"0","  "
"0","#Prepping longitudinal data excluding irrelevant cases"
"0",""
"0",""
"0","longitudinal_data_analyses <- longitudinal_data %>% "
"0","  arrange(anon_baby_id, age) %>%"
"0","  group_by(anon_baby_id) %>%"
"0","  mutate(visit = row_number()) %>%"
"0","  ungroup() %>% "
"0","  mutate(first_visit_date = case_when(visit == 1 ~ leq_date)) %>%"
"0","  mutate(second_visit_date = case_when(visit == 2 ~ leq_date)) %>%"
"0","  group_by(anon_baby_id) %>%"
"0","  fill(first_visit_date, second_visit_date, .direction=""updown"") %>% #to collapse the rows and be able to calculate visit"
"0","  ungroup() %>%"
"0","  mutate(length_between_visits = abs(interval(start= first_visit_date, end=second_visit_date)/ duration (n=1, unit=""days"" ))) %>%"
"0","  filter(! length_between_visits < 15) %>%"
"0","  mutate(l1 = case_when(l1==""French"" ~ ""French"","
"0","                        l1==""English"" ~ ""English"","
"0","                        TRUE ~ ""Heritage"")) %>%"
"0","    mutate(l2 = case_when(l2==""French"" ~ ""French"","
"0","                        l2==""English"" ~ ""English"","
"0","                        TRUE ~ ""Heritage"")) %>%"
"0","  mutate(bilingual_type = case_when(l1 %in% c(""French"", ""English"") & l2 %in% c(""French"", ""English"") ~ ""fre-eng"","
"0","                                    l1 %in% c(""French"", ""Heritage"") & l2 %in% c(""French"", ""Heritage"") ~ ""fre-her"","
"0","                                    l1 %in% c(""Heritage"", ""English"") & l2 %in% c(""Heritage"", ""English"") ~ ""eng-her"")) "
"0",""
"0","#Longitudinal data set n"
"0","n_long <-longitudinal_data_analyses %>% "
"0","  distinct(unique_id)%>%"
"0","  tally()"
"0",""
"0","#Longitudinal data set length between visit one and 2"
"0","visit_length <- longitudinal_data_analyses %>% "
"0","  filter(visit <= 2)"
"0","  "
"0",""
"0","avg_visit_l <- round(mean(visit_length$length_between_visits), 2)"
"0","min_visit_l <- round(min(visit_length$length_between_visits),2)"
"0","max_visit_l <- round(max(visit_length$length_between_visits),2)"
"0","sd_visit_l <- round(sd(visit_length$length_between_visits),2)"
