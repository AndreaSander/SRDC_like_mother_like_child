"0","load(here(""anonymized_data/longitudinal_data.Rda""))"
"0",""
"0","#select only relevant variables"
"0","longitudinal_data <- longitudinal_data %>%"
"0","  select(age, strategy, unique_id, anon_baby_id)"
"0",""
"0","longitudinal_data<- longitudinal_data %>%"
"0","  arrange(anon_baby_id, age) %>%"
"0","  group_by(anon_baby_id) %>%"
"0","  mutate(visit = row_number()) %>%"
"0","  ungroup() "
"0",""
"0","wider_longitudinal <- longitudinal_data %>%"
"0","  select(anon_baby_id, visit, strategy) %>%"
"0","  filter(str_detect(strategy, ""single-parent"", negate=T))"
"0",""
"0","wider_longitudinal <- pivot_wider(wider_longitudinal,"
"0","                                names_from = visit, values_from = strategy ) %>%"
"0","  rename(visit_1 = ""1"", visit_2 = ""2"", visit_3 =""3"", visit_4 =""4"" ) "
"0",""
"0",""
"0",""
"0","for_sankey <- wider_longitudinal %>%"
"0","  make_long(visit_1, visit_2) "
"0",""
"0","p1<- ggplot(for_sankey, aes(x = x, "
"0","               next_x = next_x, "
"0","               node = node, "
"0","               next_node = next_node,"
"0","               fill = factor(node), label=node)) +"
"0","    scale_color_manual(name= ""Exposure bins (proportion)"", values = c(""#feb24c"", ""#ef6548"", ""#d7301f"", ""#7f0000"", ""#8c510a""))+"
"0","  geom_sankey() "
"0",""
"0","p1<- p1 + "
"0","  geom_sankey_label(size=3, color=""black"", fill=""white"")+"
"0","  theme_bw()+"
"0","  theme(legend.position = ""none"", axis.ticks = element_blank(), axis.text.y = element_blank())"
"0","  "
"0",""
"0","print(p1)"
